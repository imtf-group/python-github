<a id="github"></a>

# github

Module to interface with GitHub API

<a id="github.GitHubRequests"></a>

## GitHubRequests Objects

```python
class GitHubRequests()
```

Parent class to execute GitHub API requests

<a id="github.GitHubRequests.__init__"></a>

#### \_\_init\_\_

```python
def __init__(token: str, endpoint: str, debug: bool = False)
```

Contructor

**Arguments**:

- `token`: GitHub token (gotten from the user Settings page)
- `endpoint`: Resource endpoint
- `debug`: Debug mode

<a id="github.GitHubRequests.download"></a>

#### download

```python
def download(url: str, output_file: str)
```

Download object from GitHub

**Arguments**:

- `url`: URL
- `output_file`: local file name

<a id="github.GitHubRequests.add_variable"></a>

#### add\_variable

```python
def add_variable(name: str, value: str)
```

Add variable

**Arguments**:

- `name`: variable name to add
- `value`: variable value

<a id="github.GitHubRequests.delete_variable"></a>

#### delete\_variable

```python
def delete_variable(name: str)
```

Delete variable

**Arguments**:

- `name`: variable to delete

<a id="github.GitHubRequests.list_variables"></a>

#### list\_variables

```python
def list_variables() -> dict
```

List variables

**Returns**:

variable dict

<a id="github.GitHubRequests.list_secrets"></a>

#### list\_secrets

```python
def list_secrets() -> dict
```

List secrets

**Returns**:

secret dict

<a id="github.GitHubRequests.delete_runner"></a>

#### delete\_runner

```python
def delete_runner(runner_id: int)
```

Delete runner

**Arguments**:

- `runner_id`: runner to delete

<a id="github.GitHubRequests.list_runners"></a>

#### list\_runners

```python
def list_runners() -> dict
```

List runners

**Returns**:

runner dict

<a id="github.GitHubOrganization"></a>

## GitHubOrganization Objects

```python
class GitHubOrganization(GitHubRequests)
```

Class to manage Organizations via GitHub API

<a id="github.GitHubOrganization.__init__"></a>

#### \_\_init\_\_

```python
def __init__(token, organization, debug=False)
```

Contructor

**Arguments**:

- `token`: GitHub token (needs the admin:org rights)
- `organization`: Organization name
- `debug`: Debug mode

<a id="github.GitHubOrganization.list_repositories"></a>

#### list\_repositories

```python
def list_repositories() -> dict
```

List organization repositories (generator to handle pagination)

**Returns**:

repository infos

<a id="github.GitHubRepository"></a>

## GitHubRepository Objects

```python
class GitHubRepository(GitHubRequests)
```

Class to manage Repositories via GitHub API

<a id="github.GitHubRepository.__init__"></a>

#### \_\_init\_\_

```python
def __init__(token, repository, debug=False)
```

Contructor

**Arguments**:

- `token`: GitHub token (needs the repo rights)
- `repository`: repository name
- `debug`: Debug mode

<a id="github.GitHubRepository.list_runs"></a>

#### list\_runs

```python
def list_runs(**kwargs) -> dict
```

List repository action runs (generator to handle pagination)

**Returns**:

run infos

<a id="github.GitHubRepository.get_run"></a>

#### get\_run

```python
def get_run(run_id: int) -> dict
```

Get a specific repository action run

**Arguments**:

- `run_id`: Run ID

**Returns**:

run info (JSON format)

<a id="github.GitHubRepository.cancel_run"></a>

#### cancel\_run

```python
def cancel_run(run_id: int)
```

Cancel a specific run

**Arguments**:

- `run_id`: ID of the run to cancel

<a id="github.GitHubRepository.list_commits"></a>

#### list\_commits

```python
def list_commits() -> dict
```

List repository commits (generator to handle pagination)

**Returns**:

commit infos

<a id="github.GitHubRepository.get_commit"></a>

#### get\_commit

```python
def get_commit(branch: str) -> dict
```

Get the latest commit of a specific branch

**Arguments**:

- `branch`: branch name

**Returns**:

commit info (JSON format)

<a id="github.GitHubRepository.browse"></a>

#### browse

```python
def browse(path: str) -> dict
```

Browse the repository file structure on the default branch

**Arguments**:

- `path`: Path to browse

**Returns**:

JSON file structure

<a id="github.GitHubRepository.list_artifacts"></a>

#### list\_artifacts

```python
def list_artifacts(run_id: int) -> str
```

List of the artifacts generated by a specific run

**Arguments**:

- `run_id`: Run ID

**Returns**:

JSON artifact details

<a id="github.GitHubRepository.execute_workflow"></a>

#### execute\_workflow

```python
def execute_workflow(workflow: str,
                     payload: dict,
                     head_sha: str = None) -> int
```

Execute a workflow dispatch run and return the run ID

**Arguments**:

- `workflow`: Remote workflow file name
- `payload`: Parameters to send to the workflow
- `head_sha`: current HEAD SHA of the branch where the workflow is executed

**Returns**:

Run ID

<a id="github.GitHubRepository.export_variables"></a>

#### export\_variables

```python
def export_variables(url: str, prefix: str, output: str)
```

Extract variables from artifacts and fill a file with the variables

**Arguments**:

- `url`: Remote artifact URL
- `prefix`: variable name prefix
- `output`: Local file name where the variables are exported

